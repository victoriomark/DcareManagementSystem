<?phpnamespace Model;include '../../Config/DbConnection.php';class requirementsModel extends \DbConnection{    public function uploadRequirements($name,$fileName,$studentId)    {       $query = "INSERT INTO requirements(name, filename, sdudentid) VALUES (?,?,?)";       $stmt = $this->Connect()->prepare($query);       $stmt->bind_param('sss',$name,$fileName,$studentId);       if ($stmt->execute()){           echo json_encode(['success' => true , 'message' => 'Successfully Uploaded']);       }else{           echo json_encode(['success' => false , 'error' => $stmt->error]);       }    }    public function displayRequirements($studentId)    {        $query = "SELECT * FROM requirements WHERE SdudentId = ?";        $stmt = $this->Connect()->prepare($query);        $stmt->bind_param('s',$studentId);        $stmt->execute();        $result = $stmt->get_result();        $dataRow = [];        if ($result->num_rows > 0){            while ($row = $result->fetch_assoc()){                $dataRow[] = $row;            }            return $dataRow;        }        echo "<div class='alert alert-info'> <span class=' badge bg-primary'>HI</span>  Please Upload your Requirements</div>";    }    public function deleteRequirements($id)    {        $query = "DELETE FROM requirements WHERE id = ?";        $stmt = $this->Connect()->prepare($query);        $stmt->bind_param('i',$id);        if ($stmt->execute()){            echo json_encode(['success' => true ,'message' => 'Successfully Deleted']);        }else{            echo json_encode(['success' => false ,'error' => $stmt->error]);        }    }    public function updateRequirement($id)    {        $query = "SELECT * FROM requirements WHERE id = ?";        $stmt = $this->Connect()->prepare($query);        $stmt->bind_param('i',$id);        $stmt->execute();        $result = $stmt->get_result();        $dataRow =[];        while ($row = $result->fetch_assoc()){            $dataRow[] = $row;        }        return $dataRow;    }    public function saveRequirements($name, $file, $id)    {        if (!empty($file['name'])) {            // Sanitize file name and create a unique name to avoid collisions            $fileName = basename($file['name']);            $fileName = preg_replace("/[^a-zA-Z0-9\._-]/", "_", $fileName);            // Set file directory and path            $fileDir = '../../RequirementsUploads/';            $filePath = $fileDir . $fileName;            // Update query with fileName            $query = "UPDATE requirements SET Name = ?, fileName = ? WHERE id = ?";            $stmt = $this->Connect()->prepare($query);            $stmt->bind_param('ssi', $name, $fileName, $id);        } else {            // Update without fileName            $query = "UPDATE requirements SET Name = ? WHERE id = ?";            $stmt = $this->Connect()->prepare($query);            $stmt->bind_param('si', $name, $id);        }        // Execute the query and handle success or error        if ($stmt->execute()) {            echo json_encode(['success' => true, 'message' => 'Successfully updated']);        } else {            echo json_encode(['success' => false, 'error' => $stmt->error]);        }    }}