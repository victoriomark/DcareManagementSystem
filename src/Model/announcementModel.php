<?phpnamespace Model;include_once '../../Config/DbConnection.php';class announcementModel extends \DbConnection{  public function createAnnouncement($title,$dest,$imageName,$datePosted)  {      $query = "insert into announcement(title, fileName, descreption, datePosted)values(?,?,?,?)";      $stmt = $this->Connect()->prepare($query);      $stmt->bind_param('ssss',$title,$imageName,$dest,$datePosted);      if ($stmt->execute()){          echo json_encode(['success'  => true, 'message' => 'Announcement Successfully Created']);      }else{          echo json_encode(['success'  => false, 'message' => 'failed', 'error' => $stmt->error]);      }  }  public function displayAnnouncement()  {      $result = $this->Connect()->query("select * from announcement  where DeleteStatus = 'active' ORDER BY createdAt DESC ");      $dataRow = [];      if ($result->num_rows > 0){          while ($row  = $result->fetch_row()){              $dataRow[] = $row;          }          return $dataRow;      }      return  null;  }  public function UpdateAnnouncement($id)  {       $query = "select * from announcement where id = ?";       $stmt = $this->Connect()->prepare($query);       $stmt->bind_param('i',$id);       $stmt->execute();       $result = $stmt->get_result();       $modal = '';       while ($row = $result->fetch_assoc()){           $modal .= '               <div class="modal fade" id="AnnouncementModalUpdate" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">         <div class="modal-dialog modal-dialog-centered modal-lg">            <form enctype="multipart/form-data" id="UpdateForm" action="../Controller/announcementController.php" method="post" class="modal-content">                <div class="modal-header">                <h1 class="modal-title fs-5 text-muted" id="exampleModalLabel">Update Announcement</h1>                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>            </div>            <div class="modal-body">                <div class="form-floating mb-3">                    <input name="TitleSave" value=" '.$row['title'].'" type="text" class="form-control" id="floatingInput" placeholder="Title">                    <label for="floatingInput">Title</label>                </div>                <input type="hidden" name="id" value=" '.$row['id'].'">            <div class="form-floating mb-3">                    <input  style="height: 100px" name="DescreptionSave" value=" '.$row['descreption'].'" type="text" class="form-control" id="floatingInput" placeholder="Descreption">                    <label for="floatingInput">Descreption</label>                </div>            </div>            <div class="modal-footer">                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>                <button type="submit" class="btn btn-primary">Save</button>            </div>        </form>    </div></div>                      ';       }echo $modal;  }  public function saveAnnouncement($title,$description,$id)  {      $query = "update announcement set title = ? , descreption = ?  where id =  ?";      $stmt = $this->Connect()->prepare($query);      $stmt->bind_param('ssi',$title,$description,$id);      if ($stmt->execute()){          echo json_encode(['success' => true, 'message' => 'Announcement is Successfully Updated']);      }else{          echo json_encode(['success' => false, 'error' => $stmt->error ]);      }  }  public function archiveAnnouncement($id)  {      $isDelete = "is_Deleted";      $query = "update announcement set DeleteStatus = ? where id = ?";      $stmt = $this->Connect()->prepare($query);      $stmt->bind_param('si',$isDelete,$id);      if ($stmt->execute()){          echo  json_encode(['success' => true, 'message' => 'Announcement is Successfully Updated']);      }else{          echo  json_encode(['success' => false, 'error' => $stmt->error]);      }  }  public function countAnnouncement()  {      $result = $this->Connect()->query('SELECT count(*) as announcement from announcement');       $row = $result->fetch_assoc();      echo $row['announcement'];  }}